var abp=abp||{};(function(){function t(n){abp.signalr.hubs.common=n;let t=abp.signalr.reconnectTime;n.on("getNotification",function(n){abp.event.trigger("abp.notifications.received",n)})}function i(){var i=abp.signalr.url||abp.appPath+"signalr";n(i,t).then(function(n){abp.log.debug("Connected to SignalR server!");abp.event.trigger("abp.signalr.connected");n.invoke("register").then(function(){abp.log.debug("Registered to the SignalR server!")})}).catch(function(n){abp.log.debug(n.message)})}function n(n,t){return abp.signalr.remoteServiceBaseUrl&&(n=abp.signalr.remoteServiceBaseUrl+n),abp.signalr.qs&&(n+=(n.indexOf("?")==-1?"?":"&")+abp.signalr.qs),function i(r){abp.log.debug("Starting connection using "+signalR.HttpTransportType[r]+" transport");abp.signalr.withUrlOptions.transport=r;var u=(new signalR.HubConnectionBuilder).withAutomaticReconnect({nextRetryDelayInMilliseconds:n=>(abp.log.debug("Retry to connect to SignalR"),n.previousRetryCount>maxTries)?(abp.log.debug("Max retries reached"),null):(reconnectTime*=2,abp.log.debug("Waiting "+reconnectTime+"ms before retrying"),reconnectTime)}).withUrl(n,abp.signalr.withUrlOptions).build();return t&&typeof t=="function"&&t(u),u.start().then(function(){return u}).catch(function(n){return(abp.log.debug("Cannot start the connection using "+signalR.HttpTransportType[r]+" transport. "+n.message),r!==signalR.HttpTransportType.LongPolling)?i(r+1):Promise.reject(n)})}(signalR.HttpTransportType.WebSockets)}signalR&&(abp.signalr=abp.signalr||{},abp.signalr.hubs=abp.signalr.hubs||{},abp.signalr.reconnectTime=abp.signalr.reconnectTime||5e3,abp.signalr.maxTries=abp.signalr.maxTries||8,abp.signalr.increaseReconnectTime=abp.signalr.increaseReconnectTime||function(n){return n*2},abp.signalr.withUrlOptions=abp.signalr.withUrlOptions||{},abp.signalr.autoConnect=abp.signalr.autoConnect===undefined?!0:abp.signalr.autoConnect,abp.signalr.autoReconnect=abp.signalr.autoReconnect===undefined?!0:abp.signalr.autoReconnect,abp.signalr.connect=abp.signalr.connect||i,abp.signalr.startConnection=abp.signalr.startConnection||n,abp.signalr.autoConnect&&!abp.signalr.hubs.common&&abp.signalr.connect())})();